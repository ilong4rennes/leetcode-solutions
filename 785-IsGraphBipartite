# Last updated: 9/23/2025, 1:08:16 AM
class Solution:
    def isBipartite(self, graph: List[List[int]]) -> bool:
        self.colors = ["BLUE", "RED"]
        self.visited = [False for _ in range(len(graph))]
        self.colorGraph = [None for _ in range(len(graph))]
        for node in range(len(graph)):
            if not self.visited[node]:
                isPossible = self.traverse(graph, node, "BLUE")
                if not isPossible: return False
        return True

    def traverse(self, graph, start, color):
        self.visited[start] = True
        self.colorGraph[start] = color
        neighbors = graph[start]
        for neighbor in neighbors:
            if not self.visited[neighbor]:
                newColor = "RED" if color == "BLUE" else "BLUE"
                isPossible = self.traverse(graph, neighbor, newColor)
                if not isPossible: return False
            else:
                if color != self.colorGraph[neighbor]:
                    pass
                else:
                    return False
        return True